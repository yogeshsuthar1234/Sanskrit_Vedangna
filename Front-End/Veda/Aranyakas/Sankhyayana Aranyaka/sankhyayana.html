<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sankhyayana Aranyaka</title>
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<script>tailwind.config={theme:{extend:{colors:{primary:'#8B4513',secondary:'#DAA520'},borderRadius:{'none':'0px','sm':'4px',DEFAULT:'8px','md':'12px','lg':'16px','xl':'20px','2xl':'24px','3xl':'32px','full':'9999px','button':'8px'}}}}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
:where([class^="ri-"])::before { content: "\f3c2"; }
body {
font-family: 'Inter', sans-serif;
}
.assistant-container {
height: calc(100vh - 80px);
overflow-y: auto;
}
.mcq-option:hover {
            background-color: #F0E6D2;
        }
        .mcq-option.selected {
            background-color: #D2B48C;
            border-color: #8B4513;
        }
        .mcq-option.correct {
            background-color: rgba(72, 187, 120, 0.2);
            border-color: #48bb78;
        }
        .mcq-option.incorrect {
            background-color: rgba(245, 101, 101, 0.2);
            border-color: #f56565;
        }
</style>
</head>
<body class="bg-gray-50">
  <!-- Header Navigation -->
  <header class="bg-white shadow-sm">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
        <div class="flex items-center">
            <h1 class="text-2xl font-['Pacifico'] text-primary">Vedangana</h1>
        </div>
        <!-- Hamburger Icon for Mobile -->
        <button id="menu-toggle" class="md:hidden text-gray-600 focus:outline-none">
            <i id="menu-icon" class="ri-menu-line text-2xl"></i>
        </button>
        <!-- Navigation Menu -->
        <nav id="nav-menu" class="hidden md:flex md:items-center md:space-x-8 absolute md:static top-16 left-0 w-full md:w-auto bg-white md:bg-transparent shadow-md md:shadow-none p-4 md:p-0 transition-all duration-300">
            <a href="../../Dashboard/dashboard.html" class="block md:inline-block text-gray-700 hover:text-primary transition-colors py-2 md:py-0">Home</a>
            <a href="#" class="block md:inline-block text-gray-700 hover:text-primary transition-colors py-2 md:py-0">Contact</a>
            <a href="../../../Dashboard/user.html">
                <button id="user-icon" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-200 text-gray-600 hover:bg-primary hover:text-white transition-colors">
                    <i class="ri-user-line"></i>
                </button>
            </a>
        </nav>
    </div>
</header>
<!-- Main Content with Sidebar Layout -->
<div class="flex mt-20 container mx-auto relative">

<!-- Main Content Area -->
<div class="flex-1 px-8 py-6 bg-white">
<!-- Hero Section -->
<div class="relative w-full h-96 bg-gray-900 overflow-hidden">
<div style="background-image: url('https://readdy.ai/api/search-image?query=Ancient%20Indian%20sacred%20ritual%20with%20fire%20ceremony%2C%20vedic%20traditions%2C%20forest%20meditation%20setting%2C%20philosophical%20text%2C%20spiritual%20atmosphere%2C%20warm%20golden%20light%2C%20temple%20interior%20with%20sacred%20fire%2C%20mystical%20ambiance&width=1200&height=600&seq=1&orientation=landscape'); background-size: cover; background-position: center;" class="absolute inset-0 opacity-80"></div>
<div class="absolute inset-0 bg-black bg-opacity-50"></div>
<div class="container mx-auto px-6 relative z-10 h-full flex flex-col justify-center">
<h1 class="text-5xl font-bold text-white mb-4">Sankhyayana Aranyaka</h1>
<p class="text-xl text-white max-w-2xl">Ancient mystical text exploring philosophical insights and forest meditations</p>
</div>
</div>
<!-- Main Content -->
<div class="max-w-4xl">
<!-- Understanding Section -->
<div class="mb-12">
<h2 class="text-3xl font-bold text-[#8B4513] mb-6">Understanding the Sankhyayana Aranyaka</h2>
<div class="prose max-w-none">
<p class="text-gray-700 mb-6">The Sankhyayana Aranyaka is a profound Vedic text that belongs to the Rigveda tradition. It represents a significant bridge between ritualistic practices and philosophical understanding in ancient Indian thought. This sacred text is particularly notable for its detailed exposition of various meditation techniques and philosophical concepts.</p>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
<div class="bg-gray-50 p-6 rounded-lg">
<h3 class="text-xl font-semibold text-primary mb-3">Structure</h3>
<ul class="list-disc pl-4 space-y-2 text-gray-700">
<li>Comprises fifteen chapters (Adhyayas)</li>
<li>Systematic progression from rituals to philosophy</li>
<li>Contains detailed meditation instructions</li>
<li>Includes various mantras and their explanations</li>
</ul>
</div>
<div class="bg-gray-50 p-6 rounded-lg">
<h3 class="text-xl font-semibold text-primary mb-3">Key Features</h3>
<ul class="list-disc pl-4 space-y-2 text-gray-700">
<li>Esoteric interpretations of Vedic rituals</li>
<li>Advanced meditation techniques</li>
<li>Philosophical discussions on consciousness</li>
<li>Symbolic meanings of sacred ceremonies</li>
</ul>
</div>
</div>
<div class="bg-primary/5 p-6 rounded-lg mb-8">
<h3 class="text-xl font-semibold text-primary mb-3">Primary Themes</h3>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<div class="flex items-start space-x-2">
<i class="ri-mental-health-line text-primary mt-1"></i>
<span class="text-gray-700">Inner transformation through meditation</span>
</div>
<div class="flex items-start space-x-2">
<i class="ri-book-2-line text-primary mt-1"></i>
<span class="text-gray-700">Vedic knowledge transmission</span>
</div>
<div class="flex items-start space-x-2">
<i class="ri-sun-line text-primary mt-1"></i>
<span class="text-gray-700">Unity of individual and cosmic consciousness</span>
</div>
</div>
</div>
<p class="text-gray-700 mb-4">The text emphasizes the importance of understanding the deeper meaning behind Vedic rituals rather than their mere mechanical performance. It serves as a guide for those who seek to transcend the external aspects of worship and delve into the essence of spiritual practice.</p>
</div>
</div>
<!-- Historical Context Section -->
<div class="mb-12">
<h2 class="text-3xl font-bold text-[#8B4513] mb-6">Historical Context</h2>
<div class="prose max-w-none space-y-6">
<p class="text-gray-700 mb-4">Dating back to approximately 800-600 BCE, the Sankhyayana Aranyaka emerged during a pivotal period in Vedic history. This era marked the transition from the ritualistic Brahmana period to the more philosophical Upanishadic age, reflecting the evolving spiritual consciousness of ancient India.</p>
<p class="text-gray-700 mb-4">Named after the sage Sankhyayana, this text belongs to the Rigveda tradition and was preserved through oral transmission before being documented in written form. The text's preservation and transmission through generations highlight its significance in the Vedic educational system.</p>
</div>
</div>
<!-- Understanding Section -->
<div class="mb-12">
<h2 class="text-3xl font-bold text-[#8B4513] mb-6">Core Teachings</h2>
<div class="prose max-w-none space-y-6">
<p class="text-gray-700 mb-4">The Sankhyayana Aranyaka consists of fifteen chapters (Adhyayas), each focusing on specific aspects of spiritual knowledge and practice. The text begins with ritualistic interpretations and gradually progresses towards deeper philosophical insights.</p>
<p class="text-gray-700 mb-4">Key concepts explored include:</p>
<ul class="list-disc pl-6 space-y-2 text-gray-700">
<li>The nature of Brahman (Ultimate Reality)</li>
<li>The relationship between Atman and Brahman</li>
<li>The significance of Om and its meditation</li>
<li>The inner meaning of Vedic sacrifices</li>
<li>The concept of Prana (vital force)</li>
</ul>
</div>
</div>
<!-- Purpose and Significance -->
<div class="mb-12">
<h2 class="text-3xl font-bold text-[#8B4513] mb-6">Purpose and Significance</h2>
<div class="prose max-w-none space-y-6">
<p class="text-gray-700 mb-4">The Aranyaka serves multiple purposes in the Vedic tradition:</p>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="bg-gray-50 p-6 rounded-lg">
<h3 class="text-xl font-semibold text-primary mb-3">Spiritual Practice</h3>
<p class="text-gray-700">Provides detailed guidance for meditation and contemplation practices, especially for those who have transcended external ritualistic worship.</p>
</div>
<div class="bg-gray-50 p-6 rounded-lg">
<h3 class="text-xl font-semibold text-primary mb-3">Philosophical Understanding</h3>
<p class="text-gray-700">Bridges the gap between ritual and philosophy, helping practitioners understand the deeper meaning behind Vedic ceremonies.</p>
</div>
<div class="bg-gray-50 p-6 rounded-lg">
<h3 class="text-xl font-semibold text-primary mb-3">Knowledge Transmission</h3>
<p class="text-gray-700">Preserves ancient wisdom and ensures its proper transmission through a structured teaching methodology.</p>
</div>
<div class="bg-gray-50 p-6 rounded-lg">
<h3 class="text-xl font-semibold text-primary mb-3">Personal Transformation</h3>
<p class="text-gray-700">Guides individuals in their spiritual journey from external practices to internal realization.</p>
</div>
</div>
</div>
</div>
<!-- Contemporary Relevance -->
<div class="mb-12">
<h2 class="text-3xl font-bold text-[#8B4513] mb-6">Contemporary Relevance</h2>
<div class="prose max-w-none space-y-6">
<p class="text-gray-700 mb-4">In today's fast-paced world, the teachings of Sankhyayana Aranyaka offer valuable insights for:</p>
<ul class="list-disc pl-6 space-y-2 text-gray-700">
<li>Stress management through ancient meditation techniques</li>
<li>Understanding the interconnectedness of existence</li>
<li>Developing a holistic approach to personal growth</li>
<li>Balancing material and spiritual aspects of life</li>
</ul>
<p class="text-gray-700 mt-4">Modern scholars and practitioners continue to study this text for its psychological insights and practical spiritual guidance, finding its principles remarkably relevant to contemporary challenges.</p>
</div>
</div>
</div>
<!-- Video Section -->
<div class="mb-12 bg-white rounded shadow-sm overflow-hidden">
<h2 class="text-2xl font-bold text-primary p-6 border-b border-gray-100">Video Lecture: Introduction to Sankhyayana Aranyaka</h2>
<div class="aspect-w-16 aspect-h-9 bg-gray-100">
<div class="w-full h-0 pb-[56.25%] relative bg-gray-800">
<div class="absolute inset-0 flex items-center justify-center">
<div class="text-white text-center">
<div class="w-20 h-20 rounded-full bg-primary/80 flex items-center justify-center mx-auto mb-4 cursor-pointer hover:bg-primary transition-colors">
<i class="ri-play-fill ri-2x"></i>
</div>
<p class="text-lg">Click to play video lecture</p>
</div>
</div>
</div>
</div>
<div class="p-6">
<p class="text-gray-700">Dr. Ramesh Sharma explains the historical context and philosophical significance of the Sankhyayana Aranyaka, highlighting its unique contributions to Vedic literature.</p>
</div>
</div>
<!-- MCQ Test Section -->
        <!-- MCQ Test Section -->
        <section class="py-16 bg-white">
          <div class="container mx-auto px-4">
              <h2 class="text-4xl font-bold text-primary text-center mb-6">Test Your Knowledge</h2>
              <p class="text-gray-600 text-center max-w-2xl mx-auto mb-12">Challenge yourself with these questions about Prashnopanishad to deepen your understanding of this ancient text.</p>
              
              <div class="max-w-3xl mx-auto">
                  <div class="bg-[#FFF9F0] p-8 rounded-lg shadow-md">
                      <div class="flex justify-between items-center mb-6">
                          <h3 class="text-xl font-semibold text-primary">Prashnopanishad Quiz</h3>
                          <div class="text-gray-600">Question <span id="current-question">1</span> of <span id="total-questions">5</span></div>
                      </div>
                      
                      <div class="mb-6">
                          <div class="h-2 bg-gray-200 rounded-full">
                              <div id="progress-bar" class="h-2 bg-primary rounded-full" style="width: 20%"></div>
                          </div>
                      </div>
                      
                      <div id="quiz-container">
                          <!-- Question 1 -->
                          <div class="question-slide active" data-question="1">
                              <h4 class="text-lg font-medium text-gray-800 mb-4">Who is the sage that answers the six questions in Prashnopanishad?</h4>
                              <div class="space-y-3">
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer" data-correct="true">
                                      <p class="text-gray-700">Sage Pippalada</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Sage Yajnavalkya</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Sage Uddalaka</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Sage Gautama</p>
                                  </div>
                              </div>
                          </div>
                          
                          <!-- Question 2 -->
                          <div class="question-slide hidden" data-question="2">
                              <h4 class="text-lg font-medium text-gray-800 mb-4">Which Veda is Prashnopanishad associated with?</h4>
                              <div class="space-y-3">
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Rigveda</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Yajurveda</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Samaveda</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer" data-correct="true">
                                      <p class="text-gray-700">Atharvaveda</p>
                                  </div>
                              </div>
                          </div>
                          
                          <!-- Question 3 -->
                          <div class="question-slide hidden" data-question="3">
                              <h4 class="text-lg font-medium text-gray-800 mb-4">What is the main subject of the third question in Prashnopanishad?</h4>
                              <div class="space-y-3">
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">The origin of creation</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">The nature of deities</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer" data-correct="true">
                                      <p class="text-gray-700">The origin and nature of Prana</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">The states of consciousness</p>
                                  </div>
                              </div>
                          </div>
                          
                          <!-- Question 4 -->
                          <div class="question-slide hidden" data-question="4">
                              <h4 class="text-lg font-medium text-gray-800 mb-4">According to Prashnopanishad, what are the two principles responsible for creation?</h4>
                              <div class="space-y-3">
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Purusha and Prakriti</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer" data-correct="true">
                                      <p class="text-gray-700">Rayi (matter) and Prana (energy)</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Sat and Asat</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Brahman and Maya</p>
                                  </div>
                              </div>
                          </div>
                          
                          <!-- Question 5 -->
                          <div class="question-slide hidden" data-question="5">
                              <h4 class="text-lg font-medium text-gray-800 mb-4">Who wrote the most influential commentary on Prashnopanishad in the 8th century CE?</h4>
                              <div class="space-y-3">
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer" data-correct="true">
                                      <p class="text-gray-700">Adi Shankaracharya</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Ramanuja</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Madhvacharya</p>
                                  </div>
                                  <div class="mcq-option border border-gray-300 p-4 rounded cursor-pointer">
                                      <p class="text-gray-700">Vallabhacharya</p>
                                  </div>
                              </div>
                          </div>
                          
                          <!-- Results -->
                          <!-- Results -->
<div class="question-slide hidden" data-question="results">
  <div class="text-center py-6">
      <div class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4" id="result-icon">
          <!-- Icon will be added dynamically -->
      </div>
      <h4 class="text-xl font-semibold text-primary mb-2" id="result-title">Quiz Completed!</h4>
      <p class="text-gray-700 mb-4">You scored <span id="score">0</span> out of 5</p>
      
      <!-- Progress message for perfect score -->
      <div id="perfect-score-message" class="hidden mb-4">
          <div class="bg-green-100 text-green-800 p-3 rounded-lg inline-block">
              <i class="ri-checkbox-circle-fill text-green-500 mr-2"></i>
              <span>Congratulations! You've completed this course.</span>
          </div>
      </div>
      
      <!-- Retake suggestion for imperfect scores -->
      <div id="retake-message" class="hidden mb-4">
          <div class="bg-orange-100 text-orange-800 p-3 rounded-lg inline-block">
              <i class="ri-error-warning-fill text-orange-500 mr-2"></i>
              <span>Review the material and try again to improve your score.</span>
          </div>
      </div>
      
      <div class="mb-6">
          <p class="text-gray-600 mb-2">Your understanding of Prashnopanishad:</p>
          <div class="h-4 bg-gray-200 rounded-full w-64 mx-auto">
              <div id="score-bar" class="h-4 rounded-full" style="width: 0%"></div>
          </div>
      </div>
      <button id="restart-quiz" class="bg-primary text-white px-6 py-3 !rounded-button whitespace-nowrap font-medium hover:bg-primary/90 transition">Retake Quiz</button>
  </div>
</div>
                      </div>
                      
                      <div class="flex justify-between mt-8">
                          <button id="prev-btn" class="px-6 py-2 border border-primary text-primary !rounded-button whitespace-nowrap font-medium hover:bg-primary/10 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>Previous</button>
                          <button id="next-btn" class="px-6 py-2 bg-primary text-white !rounded-button whitespace-nowrap font-medium hover:bg-primary/90 transition">Next</button>
                      </div>
                  </div>
              </div>
          </div>
      </section>
</div>
</div>
</div>
</div>
</div>
<!-- Footer -->
<footer class="bg-gray-800 text-white py-12 mt-12">
<div class="container mx-auto px-6">
<div class="grid grid-cols-1 md:grid-cols-4 gap-8">
<div>
<h3 class="text-xl font-bold mb-4">Vedic Studies</h3>
<p class="text-gray-300">Exploring ancient wisdom for modern understanding.</p>
</div>
<div>
<h4 class="font-bold mb-4">Resources</h4>
<ul class="space-y-2">
<li><a href="#" class="text-gray-300 hover:text-white">Vedic Texts</a></li>
<li><a href="#" class="text-gray-300 hover:text-white">Sanskrit Learning</a></li>
<li><a href="#" class="text-gray-300 hover:text-white">Meditation Guides</a></li>
<li><a href="#" class="text-gray-300 hover:text-white">Research Papers</a></li>
</ul>
</div>
<div>
<h4 class="font-bold mb-4">Connect</h4>
<ul class="space-y-2">
<li><a href="#" class="text-gray-300 hover:text-white">About Us</a></li>
<li><a href="#" class="text-gray-300 hover:text-white">Contact</a></li>
<li><a href="#" class="text-gray-300 hover:text-white">Events</a></li>
<li><a href="#" class="text-gray-300 hover:text-white">Newsletter</a></li>
</ul>
</div>
<div>
<h4 class="font-bold mb-4">Follow Us</h4>
<div class="flex space-x-4">
<a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-primary transition-colors">
<i class="ri-facebook-fill"></i>
</a>
<a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-primary transition-colors">
<i class="ri-twitter-fill"></i>
</a>
<a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-primary transition-colors">
<i class="ri-instagram-fill"></i>
</a>
<a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-primary transition-colors">
<i class="ri-youtube-fill"></i>
</a>
</div>
</div>
</div>
<div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
<p>© 2025 Vedic Studies Institute. All rights reserved.</p>
</div>
</div>
</footer>
<!-- chat box -->
<div class="fixed bottom-6 right-6 z-50">
  <button id="chatToggle" class="bg-gradient-to-tr from-amber-800 to-yellow-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-all duration-300 w-16 h-16 flex items-center justify-center backdrop-blur-md">
    <i class="fas fa-comment-dots text-2xl"></i>
  </button>
</div>

<!-- Chat Container -->
<div id="chatContainer" class="fixed bottom-24 right-6 w-[360px] max-w-full bg-gradient-to-br from-amber-50 to-yellow-100 rounded-3xl shadow-2xl hidden flex flex-col overflow-hidden backdrop-blur-lg border border-yellow-300/50" style="height: 75vh;">
  <div class="bg-gradient-to-r from-amber-800 to-yellow-700 text-white p-4 flex justify-between items-center">
    <h2 class="text-lg font-semibold tracking-wide">संस्कृत सहायक</h2>
    <button id="closeChat" class="hover:text-yellow-300 transition">
      <i class="fas fa-times text-xl"></i>
    </button>
  </div>

  <div id="chatHistory" class="flex-1 overflow-y-auto p-4 space-y-4 bg-opacity-30" style="backdrop-filter: blur(8px);">
    <!-- Chat Messages Will Appear Here -->
  </div>

  <div class="p-4 border-t border-amber-300/60 bg-gradient-to-r from-yellow-50 to-amber-100">
    <div class="flex items-center gap-2">
      <input id="userInput" type="text"
        class="flex-1 p-2 rounded-2xl bg-white/60 placeholder-brown-900 text-brown-900 border border-yellow-300 focus:ring-2 focus:ring-amber-600 backdrop-blur-md focus:outline-none"
        placeholder="Type a message...">
      <button onclick="sendMessage()" class="p-3 bg-gradient-to-tr from-amber-700 to-yellow-500 rounded-full text-white shadow-lg hover:scale-110 transition-all">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </div>
</div>



<script>  // Chat Functionality
let chatHistory = JSON.parse(localStorage.getItem('sanskritChat')) || [];

document.getElementById('chatToggle').addEventListener('click', () => {
    const chatContainer = document.getElementById('chatContainer');
    chatContainer.classList.toggle('hidden');
    loadChatHistory();
});

document.getElementById('closeChat').addEventListener('click', () => {
    document.getElementById('chatContainer').classList.add('hidden');
});

function loadChatHistory() {
  const historyDiv = document.getElementById('chatHistory');
  historyDiv.innerHTML = chatHistory.map(msg => `
      <div class="${msg.role === 'user' ? 'flex justify-end' : 'flex justify-start'}">
          <div class="
              ${msg.role === 'user' 
                  ? 'bg-gradient-to-tr from-brown-200 to-brown-300 text-brown-900' 
                  : 'bg-gradient-to-tr from-yellow-100 to-amber-100 text-amber-900'
              } 
              p-3 rounded-2xl max-w-[80%] shadow-md">
              ${marked.parse(msg.content)}
              <div class="text-xs text-gray-500 mt-1 text-right">${new Date(msg.timestamp).toLocaleTimeString()}</div>
          </div>
      </div>
  `).join('');
  historyDiv.scrollTo(0, historyDiv.scrollHeight);
}





async function sendMessage() {
    const input = document.getElementById('userInput');
    const message = input.value.trim();
    if (!message) return;
    input.value = '';

    // Add user message
    chatHistory.push({ role: 'user', content: message, timestamp: new Date().toISOString() });

    // Add loading state
    chatHistory.push({ role: 'assistant', content: 'प्रतीक्षा कुरु...', timestamp: new Date().toISOString() });
    loadChatHistory();

    try {
        const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
            method: 'POST',
            headers: {
                'Authorization': 'Bearer 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',
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                model: 'deepseek/deepseek-r1:free',
                messages: [{ role: 'user', content: message }],
            }),
        });

        const data = await response.json();
        const botResponse = data.choices?.[0]?.message?.content || 'उत्तरं प्राप्तुं अशक्यम्';

        chatHistory.pop();
        chatHistory.push({ role: 'assistant', content: botResponse, timestamp: new Date().toISOString() });
        localStorage.setItem('sanskritChat', JSON.stringify(chatHistory));
        loadChatHistory();
    } catch (error) {
        console.error('Error:', error);
        chatHistory.pop();
        chatHistory.push({ role: 'assistant', content: 'त्रुटिः! पुनः प्रयत्नं कुरुत।', timestamp: new Date().toISOString() });
        loadChatHistory();
    }
}

document.getElementById('userInput').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') sendMessage();
});

document.addEventListener('DOMContentLoaded', function() {
            // Quiz functionality
            const quizContainer = document.getElementById('quiz-container');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const currentQuestionEl = document.getElementById('current-question');
            const progressBar = document.getElementById('progress-bar');
            const scoreEl = document.getElementById('score');
            const scoreBar = document.getElementById('score-bar');
            const restartBtn = document.getElementById('restart-quiz');
            
            let currentQuestion = 1;
            const totalQuestions = 5;
            let score = 0;
            let answered = {};
            
            function updateQuestion() {
    // Hide all questions
    document.querySelectorAll('.question-slide').forEach(slide => {
        slide.classList.add('hidden');
    });
    
    // Show current question
    const currentSlide = currentQuestion > totalQuestions 
        ? document.querySelector('[data-question="results"]')
        : document.querySelector(`[data-question="${currentQuestion}"]`);
    currentSlide.classList.remove('hidden');
    
    // Update progress
    if (currentQuestion <= totalQuestions) {
        currentQuestionEl.textContent = currentQuestion;
        progressBar.style.width = `${(currentQuestion / totalQuestions) * 100}%`;
    }
    
    // Update buttons
    prevBtn.disabled = currentQuestion === 1;
    if (currentQuestion > totalQuestions) {
        nextBtn.style.display = 'none';
        
        // Update score
        scoreEl.textContent = score;
        scoreBar.style.width = `${(score / totalQuestions) * 100}%`;
        
        // Get result elements
        const resultIcon = document.getElementById('result-icon');
        const resultTitle = document.getElementById('result-title');
        const perfectMsg = document.getElementById('perfect-score-message');
        const retakeMsg = document.getElementById('retake-message');
        const restartBtn = document.getElementById('restart-quiz');
        
        // Clear previous classes
        resultIcon.className = 'w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4';
        scoreBar.className = 'h-4 rounded-full';
        
        if (score === totalQuestions) {
            // Perfect score - show success message and hide retake button
            resultIcon.innerHTML = '<i class="ri-checkbox-circle-fill text-green-500 text-4xl"></i>';
            resultIcon.classList.add('bg-green-100');
            resultTitle.textContent = 'Perfect Score! Course Completed!';
            scoreBar.classList.add('bg-green-500');
            perfectMsg.classList.remove('hidden');
            retakeMsg.classList.add('hidden');
            restartBtn.classList.add('hidden'); // Hide retake button
            updateVedaSubtype("Aranyakas","Sankhyayana Aranyaka",true);

        } else if (score >= totalQuestions * 0.6) { // 60% or above
            // Good score - show retake button
            resultIcon.innerHTML = '<i class="ri-emotion-happy-fill text-blue-500 text-4xl"></i>';
            resultIcon.classList.add('bg-blue-100');
            resultTitle.textContent = 'Good Job!';
            scoreBar.classList.add('bg-primary');
            perfectMsg.classList.add('hidden');
            retakeMsg.classList.add('hidden');
            restartBtn.classList.remove('hidden');
            updateVedaSubtype("Aranyakas","Sankhyayana Aranyaka",true);

        } else {
            // Needs improvement - show retake button
            resultIcon.innerHTML = '<i class="ri-emotion-unhappy-fill text-orange-500 text-4xl"></i>';
            resultIcon.classList.add('bg-orange-100');
            resultTitle.textContent = 'Keep Practicing!';
            scoreBar.classList.add('bg-orange-500');
            perfectMsg.classList.add('hidden');
            retakeMsg.classList.remove('hidden');
            restartBtn.classList.remove('hidden');
            updateVedaSubtype("Aranyakas","Sankhyayana Aranyaka",false);

        }
    } else {
        nextBtn.style.display = 'block';
        nextBtn.textContent = currentQuestion === totalQuestions ? 'Finish' : 'Next';
    }
}



// Function to update Veda subtype progress
async function updateVedaSubtype(vedaName, subtypeName, result) {
  try {
    const userId = localStorage.getItem('userId'); // Get from your auth system
    const response = await fetch('https://sanskrit-vedangna.onrender.com/api/progress/veda-subtype', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-User-Id': userId
      },
      body: JSON.stringify({
        VedaName: vedaName,
        SubtypeName: subtypeName,
        Result: result
      })
    });

    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(errorData.title || 'Failed to update Veda progress');
    }

    return await response.json();
  } catch (error) {
    console.error('Veda update error:', error);
    throw error; // Re-throw for error handling in components
  }
}

            
            prevBtn.addEventListener('click', function() {
                if (currentQuestion > 1) {
                    currentQuestion--;
                    updateQuestion();
                }
            });
            
            nextBtn.addEventListener('click', function() {
                if (currentQuestion <= totalQuestions) {
                    // If not answered, show alert
                    if (!answered[currentQuestion]) {
                        alert('Please select an answer before proceeding.');
                        return;
                    }
                    
                    currentQuestion++;
                    updateQuestion();
                }
            });
            
            restartBtn.addEventListener('click', function() {
                currentQuestion = 1;
                score = 0;
                answered = {};
                
                // Reset all options
                document.querySelectorAll('.mcq-option').forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                updateQuestion();
            });
            
            // Handle option selection
            document.querySelectorAll('.mcq-option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionNumber = parseInt(this.closest('.question-slide').dataset.question);
                    
                    // If already answered, return
                    if (answered[questionNumber]) return;
                    
                    // Mark as answered
                    answered[questionNumber] = true;
                    
                    // Get all options for this question
                    const options = this.closest('.question-slide').querySelectorAll('.mcq-option');
                    
                    // Select this option
                    this.classList.add('selected');
                    
                    // Check if correct
                    const isCorrect = this.hasAttribute('data-correct');
                    if (isCorrect) {
                        score++;
                        this.classList.add('correct');
                    } else {
                        this.classList.add('incorrect');
                        
                        // Show correct answer
                        options.forEach(opt => {
                            if (opt.hasAttribute('data-correct')) {
                                opt.classList.add('correct');
                            }
                        });
                    }
                });
            });
            
            // Initialize
            updateQuestion();
        });</script>
</body>
</html>
